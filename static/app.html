<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grok Art Proxy</title>
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>

    <header>
        <div class="header-row">
            <h1>Grok Art Proxy</h1>
            <button id="btn-logout" class="btn btn-logout" title="é€€å‡ºç™»å½•">é€€å‡º</button>
        </div>
    </header>

    <div class="container">
        <!-- Navigation -->
        <nav class="tabs">
            <button class="tab-btn active" data-tab="tokens">ä»¤ç‰Œç®¡ç†</button>
            <button class="tab-btn" data-tab="apikeys">API å¯†é’¥</button>
            <button class="tab-btn" data-tab="imagine">å›¾ç‰‡ç”Ÿæˆ</button>
            <button class="tab-btn" data-tab="img2img">å›¾ç”Ÿå›¾</button>
            <button class="tab-btn" data-tab="video">è§†é¢‘åˆæˆ</button>
        </nav>

        <!-- Token Panel -->
        <section id="panel-tokens" class="panel active">
            <div class="section">
                <h2>ç³»ç»ŸçŠ¶æ€</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="stat-total">0</div>
                        <div class="stat-label">ä»¤ç‰Œæ€»æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-active">0</div>
                        <div class="stat-label">æ´»è·ƒæ•°é‡</div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>æ‰¹é‡æ“ä½œ</h2>
                <div class="form-group">
                    <label>å¯¼å…¥ä»¤ç‰Œ (SSO æˆ– JSON æ ¼å¼)</label>
                    <textarea id="input-tokens" placeholder="åœ¨æ­¤ç²˜è´´ä»¤ç‰Œ..."></textarea>
                </div>
                <div style="margin-top: 15px; display:flex; gap:15px; flex-wrap:wrap;">
                    <button id="btn-import-tokens" class="btn">å¯¼å…¥æ•°æ®</button>
                    <button id="btn-nsfw-all" class="btn btn-secondary">æ‰¹é‡å¯ç”¨ NSFW</button>
                    <button id="btn-clear-tokens" class="btn btn-danger">æ¸…ç©ºå…¨éƒ¨</button>
                </div>

                <!-- NSFW Progress -->
                <div id="nsfw-progress" class="progress-container">
                    <div class="progress-fill"></div>
                </div>
                <div id="nsfw-log" class="log-container" style="display:none; height:100px;"></div>
            </div>

            <div class="section">
                <div style="display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:15px; margin-bottom:20px;">
                    <h2 style="margin-bottom:0;">ä»¤ç‰Œåˆ—è¡¨</h2>
                    <button id="btn-export-tokens" class="btn btn-secondary">å¯¼å‡ºä»¤ç‰Œ</button>
                </div>
                <div id="token-list" class="token-list">
                    <!-- Tokens Rendered Here -->
                </div>
                <div id="token-pagination" class="pagination" style="margin-top:20px; display:flex; justify-content:center; align-items:center; gap:10px; flex-wrap:wrap;">
                    <!-- Pagination Rendered Here -->
                </div>
            </div>
        </section>

        <!-- API Keys Panel -->
        <section id="panel-apikeys" class="panel">
            <div class="section">
                <h2>API å¯†é’¥ç®¡ç†</h2>
                <p style="margin-bottom:20px; color:#666;">åˆ›å»º API å¯†é’¥ï¼Œæ”¯æŒ OpenAI å’Œ Anthropic ä¸¤ç§æ¥å£æ ¼å¼ï¼Œå¯ç›´æ¥å¯¹æ¥ Claude Code CLI</p>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="apikey-stat-total">0</div>
                        <div class="stat-label">å¯†é’¥æ€»æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="apikey-stat-enabled">0</div>
                        <div class="stat-label">å·²å¯ç”¨</div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>åˆ›å»ºå¯†é’¥</h2>
                <div class="form-row">
                    <div class="form-group" style="flex:2;">
                        <label>å¯†é’¥åç§° (å¯é€‰)</label>
                        <input type="text" id="apikey-name" placeholder="ä¾‹å¦‚: æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§æœåŠ¡å™¨...">
                    </div>
                    <div class="form-group" style="flex:0 0 auto; display:flex; align-items:flex-end;">
                        <button id="btn-create-apikey" class="btn">åˆ›å»ºå¯†é’¥</button>
                    </div>
                </div>

                <!-- New key display (shown after creation) -->
                <div id="new-apikey-display" class="new-key-display" style="display:none;">
                    <div class="new-key-warning">è¯·ç«‹å³ä¿å­˜æ­¤å¯†é’¥ï¼Œå…³é—­åå°†æ— æ³•å†æ¬¡æŸ¥çœ‹å®Œæ•´å¯†é’¥ï¼</div>
                    <div class="new-key-value" id="new-apikey-value"></div>
                    <button id="btn-copy-apikey" class="btn btn-secondary">å¤åˆ¶å¯†é’¥</button>
                </div>
            </div>

            <div class="section">
                <h2>å¯†é’¥åˆ—è¡¨</h2>
                <div id="apikey-list" class="token-list">
                    <!-- API Keys Rendered Here -->
                </div>
            </div>

            <div class="section">
                <h2>API ä½¿ç”¨è¯´æ˜</h2>
                <div class="api-docs">
                    <h3>è®¤è¯æ–¹å¼</h3>
                    <p>æ”¯æŒä¸¤ç§è®¤è¯æ–¹å¼ï¼ˆä»»é€‰å…¶ä¸€ï¼‰ï¼š</p>
                    <ul>
                        <li><code>Authorization: Bearer sk-xxx</code> â€” OpenAI é£æ ¼</li>
                        <li><code>x-api-key: sk-xxx</code> â€” Anthropic é£æ ¼</li>
                    </ul>

                    <h3>å¯¹è¯è¡¥å…¨ â€” OpenAI æ ¼å¼</h3>
                    <pre><code>POST /v1/chat/completions
Authorization: Bearer sk-xxxxxxxx
Content-Type: application/json

{
  "model": "grok-4",
  "messages": [{"role": "user", "content": "Hello!"}],
  "stream": true
}</code></pre>

                    <h3>å¯¹è¯è¡¥å…¨ â€” Anthropic Messages æ ¼å¼</h3>
                    <pre><code>POST /v1/messages
x-api-key: sk-xxxxxxxx
Content-Type: application/json

{
  "model": "claude-sonnet-4-20250514",
  "max_tokens": 8096,
  "messages": [{"role": "user", "content": "Hello!"}],
  "stream": true
}</code></pre>

                    <h3>Claude Code CLI é…ç½®</h3>
                    <p>åœ¨ç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ä½¿ç”¨æœ¬ä»£ç†ï¼š</p>
                    <pre><code># è®¾ç½®ç¯å¢ƒå˜é‡
export ANTHROPIC_BASE_URL=https://ä½ çš„åŸŸå
export ANTHROPIC_API_KEY=sk-xxxxxxxx

# å¯åŠ¨ Claude Code
claude</code></pre>

                    <h3>Claude â†’ Grok æ¨¡å‹æ˜ å°„</h3>
                    <ul>
                        <li><code>claude-*-opus-*</code> â†’ <code>grok-4-heavy</code>ï¼ˆæ·±åº¦æ¨ç†ï¼‰</li>
                        <li><code>claude-*-sonnet-*</code> â†’ <code>grok-4</code>ï¼ˆæ ‡å‡†ï¼‰</li>
                        <li><code>claude-*-haiku-*</code> â†’ <code>grok-4-fast</code>ï¼ˆå¿«é€Ÿï¼‰</li>
                        <li>å…¶ä»– <code>claude-*</code> â†’ <code>grok-4</code>ï¼ˆé»˜è®¤ï¼‰</li>
                        <li>åŸç”Ÿ Grok æ¨¡å‹åç§°ç›´æ¥é€ä¼ </li>
                    </ul>

                    <h3>æ”¯æŒçš„æ–‡æœ¬æ¨¡å‹</h3>
                    <ul>
                        <li><code>grok-3</code> / <code>grok-3-fast</code> â€” Grok 3 ç³»åˆ—</li>
                        <li><code>grok-4</code> / <code>grok-4-fast</code> / <code>grok-4-heavy</code> â€” Grok 4 ç³»åˆ—</li>
                        <li><code>grok-4-mini</code> â€” Grok 4 Miniï¼ˆæ€ç»´é“¾ï¼‰</li>
                        <li><code>grok-4.1</code> / <code>grok-4.1-fast</code> / <code>grok-4.1-expert</code> / <code>grok-4.1-thinking</code> â€” Grok 4.1 ç³»åˆ—</li>
                    </ul>

                    <h3>å›¾ç‰‡ç”Ÿæˆï¼ˆvia Chat APIï¼‰</h3>
                    <pre><code>POST /v1/chat/completions
Authorization: Bearer sk-xxxxxxxx
Content-Type: application/json

{
  "model": "grok-image-16_9",
  "messages": [{"role": "user", "content": "ä¸€åªå¯çˆ±çš„çŒ«å’ª"}],
  "stream": true
}</code></pre>

                    <h3>æ”¯æŒçš„å›¾ç‰‡æ¨¡å‹</h3>
                    <ul>
                        <li><code>grok-image</code> â€” 1:1 é»˜è®¤</li>
                        <li><code>grok-image-1_1</code> / <code>grok-image-2_3</code> / <code>grok-image-3_2</code></li>
                        <li><code>grok-image-16_9</code> / <code>grok-image-9_16</code></li>
                    </ul>

                    <h3>è§†é¢‘ç”Ÿæˆï¼ˆvia Chat APIï¼‰</h3>
                    <pre><code>POST /v1/chat/completions
Authorization: Bearer sk-xxxxxxxx
Content-Type: application/json

{
  "model": "grok-video",
  "messages": [{"role": "user", "content": "ä¸€åªçŒ«å’ªåœ¨è‰åœ°ä¸Šå¥”è·‘"}],
  "stream": true
}</code></pre>

                    <h3>æ”¯æŒçš„è§†é¢‘æ¨¡å‹</h3>
                    <ul>
                        <li><code>grok-video</code> â€” 16:9 é»˜è®¤</li>
                        <li><code>grok-video-1_1</code> / <code>grok-video-2_3</code> / <code>grok-video-3_2</code></li>
                        <li><code>grok-video-16_9</code> / <code>grok-video-9_16</code></li>
                    </ul>

                    <h3>è·å–æ¨¡å‹åˆ—è¡¨</h3>
                    <pre><code>GET /v1/models
Authorization: Bearer sk-xxxxxxxx</code></pre>
                </div>
            </div>
        </section>

        <!-- Image Panel -->
        <section id="panel-imagine" class="panel">
            <div class="section">
                <h2>å‚æ•°è®¾ç½®</h2>
                <div class="form-row">
                    <div class="form-group" style="flex:2;">
                        <label>æç¤ºè¯</label>
                        <input type="text" id="input-prompt" placeholder="æè¿°ä½ æƒ³è¦çš„å›¾ç‰‡..."
                            value="">
                    </div>
                    <div class="form-group">
                        <label>æ•°é‡</label>
                        <input type="number" id="input-count" value="10" min="1" max="50">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>å®½é«˜æ¯”</label>
                        <select id="select-aspect">
                            <option value="2:3">2:3 (ç«–ç‰ˆ)</option>
                            <option value="3:2">3:2 (æ¨ªç‰ˆ)</option>
                            <option value="1:1">1:1 (æ­£æ–¹å½¢)</option>
                            <option value="16:9">16:9 (å®½å±)</option>
                            <option value="9:16">9:16 (æ‰‹æœº)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>å†…å®¹è¿‡æ»¤</label>
                        <select id="select-nsfw">
                            <option value="true">å…è®¸ NSFW</option>
                            <option value="false">å®‰å…¨æ¨¡å¼</option>
                        </select>
                    </div>
                </div>

                <button id="btn-generate" class="btn" style="width:100%;">å¼€å§‹ç”Ÿæˆ</button>

                <div id="gen-progress" class="progress-container">
                    <div class="progress-fill"></div>
                </div>
                <div id="gen-status-text" style="text-align:center; margin-top:10px; font-weight:bold;"></div>
            </div>

            <div class="section">
                <h2>è¾“å‡ºç»“æœ</h2>
                <div id="gen-log" class="log-container" style="height:100px; margin-bottom:20px;"></div>

                <div id="image-grid" class="image-grid">
                    <!-- Images Rendered Here -->
                </div>

                <div style="text-align:center; margin-top:40px;">
                    <button id="btn-load-more" class="btn btn-secondary" style="display:none;">åŠ è½½æ›´å¤š</button>
                </div>
            </div>
        </section>

        <!-- Image-to-Image Panel -->
        <section id="panel-img2img" class="panel">
            <div class="section">
                <h2>å‚è€ƒå›¾ä¸Šä¼ </h2>
                <div id="img2img-dropzone" class="dropzone">
                    <div id="img2img-placeholder">
                        <div style="font-size:48px; margin-bottom:10px;">ğŸ–¼ï¸</div>
                        <div>ç‚¹å‡»æˆ–æ‹–æ‹½ä¸Šä¼ å‚è€ƒå›¾</div>
                        <div style="font-size:12px; color:#888; margin-top:8px;">æ”¯æŒ JPGã€PNGã€WebPï¼ˆæœ€å¤§ 10MBï¼‰</div>
                    </div>
                    <img id="img2img-preview" src="" alt="é¢„è§ˆ" style="display:none; max-width:100%; max-height:300px; border-radius:8px;">
                    <input type="file" id="img2img-file" accept="image/*" style="display:none;">
                </div>
                <div style="margin-top:10px; display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
                    <button id="btn-img2img-clear" class="btn btn-secondary" style="display:none;">æ¸…é™¤å›¾ç‰‡</button>
                    <span id="img2img-file-info" style="color:#888; font-size:13px;"></span>
                </div>
            </div>

            <div class="section">
                <h2>ç”Ÿæˆå‚æ•°</h2>
                <div class="form-row">
                    <div class="form-group" style="flex:2;">
                        <label>æç¤ºè¯ï¼ˆå¯é€‰ï¼‰</label>
                        <input type="text" id="img2img-prompt" placeholder="æè¿°ä½ å¸Œæœ›ç”Ÿæˆçš„æ•ˆæœï¼Œç•™ç©ºåˆ™ä»…åŸºäºå‚è€ƒå›¾...">
                    </div>
                    <div class="form-group">
                        <label>æ•°é‡ï¼ˆæœ€å¤š4å¼ ï¼‰</label>
                        <input type="number" id="img2img-count" value="4" min="1" max="4">
                    </div>
                </div>

                <button id="btn-img2img-generate" class="btn" style="width:100%;">å¼€å§‹å›¾ç”Ÿå›¾</button>

                <div id="img2img-progress" class="progress-container">
                    <div class="progress-fill"></div>
                </div>
                <div id="img2img-status" style="text-align:center; margin-top:10px; font-weight:bold;"></div>
            </div>

            <div class="section">
                <h2>è¾“å‡ºç»“æœ</h2>
                <div id="img2img-log" class="log-container" style="height:200px; margin-bottom:20px;"></div>
                <div id="img2img-grid" class="image-grid"></div>
            </div>
        </section>

        <!-- Video Panel -->
        <section id="panel-video" class="panel">
            <div class="section">
                <h2>è§†é¢‘åˆæˆ</h2>
                <p style="margin-bottom:20px;">è¯·å…ˆä»å›¾ç‰‡ç”Ÿæˆé¡µé¢é€‰æ‹©ä¸€å¼ å›¾ç‰‡</p>

                <!-- Hidden inputs for data transfer -->
                <input type="hidden" id="video-url">
                <input type="hidden" id="video-post-id">

                <div id="video-preview" class="preview-card" style="display:none;">
                    <!-- Preview Rendered Here -->
                </div>

                <div class="form-row">
                    <div class="form-group" style="flex:2;">
                        <label>åŠ¨ä½œæç¤ºè¯</label>
                        <textarea id="video-prompt" placeholder="æè¿°åŠ¨ä½œæ•ˆæœ (å¦‚: é•œå¤´å¹³ç§»ã€çœ¨çœ¼ã€è¡Œèµ°)"></textarea>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>æ—¶é•¿</label>
                        <select id="video-len">
                            <option value="6">6 ç§’</option>
                            <option value="10">10 ç§’</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>åˆ†è¾¨ç‡</label>
                        <select id="video-res">
                            <option value="480p">480p (å¿«é€Ÿ)</option>
                            <option value="720p">720p (é«˜æ¸…)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>æ¨¡å¼</label>
                        <select id="video-mode">
                            <option value="custom">æ ‡å‡†æ¨¡å¼</option>
                            <option value="extremely-crazy">ç–¯ç‹‚æ¨¡å¼</option>
                        </select>
                    </div>
                </div>

                <button id="btn-video-gen" class="btn">ç”Ÿæˆè§†é¢‘</button>

                <div id="video-progress" class="progress-container">
                    <div class="progress-fill"></div>
                </div>

                <div id="video-result" class="video-result"></div>
                <div id="video-log" class="log-container" style="margin-top:20px;"></div>
            </div>
        </section>
    </div>

    <script type="module" src="/js/app.js"></script>
</body>

</html>